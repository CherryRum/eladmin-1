import org.gradle.api.java.archives.internal.DefaultManifest

plugins {
    id 'com.lwohvye.java-conventions'
    id 'org.springframework.boot' // 主要是定义了这个，不晓得在子模块定义为啥会报错
}

ext.sharedManifest = manifest {
    attributes("Developer": "lWoHvYe",
            "Created-By": "Gradle",
            "Built-By": "IntelliJ IDEA",
            "Build-Jdk-Spec": JavaVersion.VERSION_19)
} as DefaultManifest

ext { // 这个定义是可以传递的
    lombokVersion = "1.18.25"
}

subprojects {
    dependencies {}
}

tasks.withType(Checkstyle).configureEach {
    reports {
        xml.required = false
        html.required = true
        html.stylesheet resources.text.fromFile('config/xsl/checkstyle-custom.xsl')
    }
}

tasks.named("bootBuildImage") {
    environment = [
            "BP_JVM_VERSION"              : "19",
            "BPE_DELIM_JAVA_TOOL_OPTIONS" : " ",
            "BPE_APPEND_JAVA_TOOL_OPTIONS": "-XX:+UseZGC --enable-preview"
    ]
}
